<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>âœ¨</text></svg>" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Pixie Stylist - Your AI-powered fashion styling assistant" />
    <meta name="theme-color" content="#6C5CE7" />
    
    <title>Pixie Stylist - AI Fashion Recommendations</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet" />
  </head>
  <script>
  const form = document.getElementById("chat-form");
  const messages = document.getElementById("messages");
  const input = document.getElementById("userInput");

  const N8N_WEBHOOK_URL = "https://n8ngc.codeblazar.org/webhook/pixie-stylist";

  function addMessage(text, sender) {
    const msg = document.createElement("div");
    msg.className = sender;
    msg.innerText = text;
    messages.appendChild(msg);
    messages.scrollTop = messages.scrollHeight;
  }

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const userMessage = input.value;
    addMessage(userMessage, "user");
    input.value = "";

    try {
      const response = await fetch(N8N_WEBHOOK_URL, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          message: userMessage
        })
      });

      const data = await response.json();
      addMessage(data.reply || "No response", "bot");
    } catch (error) {
      addMessage("Something went wrong ðŸ˜­", "bot");
    }
  });
</script>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
    
    <!-- Flowise Chatbot -->
    <script type="module">
        import Chatbot from "https://cdn.jsdelivr.net/npm/flowise-embed/dist/web.js"
        Chatbot.init({
            chatflowid: "315df90b-c95c-4dda-8c85-d4a5d5b5e0fa",
            apiHost: "https://cloud.flowiseai.com",
            theme: {
                button: {
                    backgroundColor: "#6C5CE7",
                    right: 20,
                    bottom: 20,
                    size: 60,
                    iconColor: "white",
                },
                chatWindow: {
                    welcomeMessage: "Hi! I'm your Pixie Stylist assistant. Ask me anything about fashion, styling tips, or how to use this app!",
                    backgroundColor: "#ffffff",
                    height: 600,
                    width: 400,
                    fontSize: 16,
                    poweredByTextColor: "#6C5CE7",
                    botMessage: {
                        backgroundColor: "#f7f8ff",
                        textColor: "#303235",
                        showAvatar: true,
                        avatarSrc: "https://raw.githubusercontent.com/zahidkhawaja/langchain-chat-nextjs/main/public/parroticon.png",
                    },
                    userMessage: {
                        backgroundColor: "#6C5CE7",
                        textColor: "#ffffff",
                        showAvatar: true,
                        avatarSrc: "https://raw.githubusercontent.com/zahidkhawaja/langchain-chat-nextjs/main/public/usericon.png",
                    },
                    textInput: {
                        placeholder: "Ask me about fashion...",
                        backgroundColor: "#ffffff",
                        textColor: "#303235",
                        sendButtonColor: "#6C5CE7",
                    }
                }
            }
        })
    </script>
    <div id="chat-container">
  <div id="messages"></div>

  <form id="chat-form">
    <input
      type="text"
      id="userInput"
      placeholder="Ask Pixie Stylist..."
      required
    />
    <button type="submit">Send</button>
  </form>
</div>

  </body>
</html>
